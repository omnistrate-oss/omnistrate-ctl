name: Multiple Resources
deployment:
  hostedDeployment:
    AwsAccountId: '339713121445'
    AwsBootstrapRoleAccountArn: 'arn:aws:iam::339713121445:role/omnistrate-bootstrap-role'
    GcpProjectId: 'omnistrate-dataplane-host-dev'
    GcpProjectNumber: '61114262792'
    GcpServiceAccountEmail: 'bootstrap@omnistrate-dataplane-host-dev.iam.gserviceaccount.com'
services:
  - name: terraformChild
    internal: true
    terraformConfigurations:
      configurationPerCloudProvider:
        aws:
          terraformPath: /e2etestv2/original/terraform
          gitConfiguration:
            reference: refs/tags/v3.7.1
            repositoryUrl: https://github.com/omnistrate/resource-spec-samples.git
            accessToken: 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
          terraformExecutionIdentity: "arn:aws:iam::339713121445:role/omnistrate-custom-terraform-execution-role"
        gcp:
          terraformPath: /e2etestv2/original/terraform
          gitConfiguration:
            reference: refs/tags/v3.7.1
            repositoryUrl: https://github.com/omnistrate/resource-spec-samples.git
            accessToken: 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
          terraformExecutionIdentity: "fill in service account"
  - name: terraformChild2
    internal: true
    terraformConfigurations:
      configurationPerCloudProvider:
        aws:
          terraformPath: /e2etestv2/original/terraform2
          gitConfiguration:
            reference: refs/tags/v3.7.1
            repositoryUrl: https://github.com/omnistrate/resource-spec-samples.git
            accessToken: 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
          terraformExecutionIdentity: "arn:aws:iam::339713121445:role/omnistrate-custom-terraform-execution-role"
        gcp:
          terraformPath: /e2etestv2/original/terraform2
          gitConfiguration:
            reference: refs/tags/v3.7.1
            repositoryUrl: https://github.com/omnistrate/resource-spec-samples.git
            accessToken: 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
          terraformExecutionIdentity: "fill in service account"
  - name: kustomizeRoot
    type: kustomize
    dependsOn:
      - terraformChild
      - terraformChild2
    compute:
      instanceTypes:
        - name: t4g.small
          cloudProvider: aws
        - name: e2-medium
          cloudProvider: gcp
    network:
      ports:
        - 3306
    kustomizeConfiguration:
      kustomizePath: /e2etestv2/original/kustomize
      gitConfiguration:
        reference: refs/tags/v3.7.1
        repositoryUrl: https://github.com/omnistrate/resource-spec-samples.git
        accessToken: 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
    apiParameters:
      - key: username
        description: Username
        name: Username
        type: String
        modifiable: true
        required: false
        export: true
        defaultValue: username
      - key: password
        description: Default DB Password
        name: Password
        type: String
        modifiable: false
        required: false
        export: false
        defaultValue: postgres